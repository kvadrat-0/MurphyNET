<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Викторина Мерфи</title>
    <link href="/css/app.css" rel="stylesheet">
    <style>
        /* Стили */
        .quiz-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
        }

        .question-box {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #28276D;
            border-radius: 10px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }

        .quiz-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .quiz-btn {
            background: #28276D;
            color: #FACECF;
            padding: 15px 30px;
            border-radius: 25px;
            border: none;
            font-family: 'InknutAntiqua', sans-serif;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            max-width: 300px;
            word-wrap: break-word;
            white-space: normal;
            line-height: 1.4;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

            .quiz-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
                background: #3A3A8D;
            }

        .cyber-question {
            background: #f8f9fa;
            border-color: #28276D;
        }

        .answers-grid {
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .correct-answer {
            position: relative;
            border-left: 4px solid #28a745;
            padding-left: 10px;
        }

        .correct-tag {
            color: #28a745;
            font-size: 0.9em;
            margin-left: 10px;
            display: none;
        }

        .show-correct .correct-tag {
            display: inline-block !important;
        }

        .show-correct .correct-answer {
            background: #e8f5e9;
            border-radius: 8px;
            padding: 10px;
        }

        #finish-btn.completed {
            background: #28a745;
            cursor: not-allowed;
        }

        .input-field {
            border: 2px solid #FACECF;
            border-radius: 15px;
            padding: 12px 20px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="main">
            <div class="topchick">
                <a href="/" style="text-decoration: none;">
                    <img class="logo" src="/css/media/logo.png">
                </a>
                <div class="homosexual">
                    <img class="TitleMurphyVSeti" src="/css/media/title.png">
                </div>
            </div>

            <div class="quiz-container">
                <!-- Пользовательская викторина -->
                <div class="custom-quiz">
                    <h2>Создайте свою викторину</h2>
                    <div class="quiz-controls">
                        <button onclick="addQuestion()" class="quiz-btn">Добавить вопрос</button>
                        <button onclick="saveQuiz()" class="quiz-btn">Сохранить</button>
                        <button onclick="clearAll()" class="quiz-btn btn-danger">Очистить всё</button>
                    </div>
                    <div id="questions-container"></div>
                </div>

                <!-- Стандартная викторина -->
                <div class="standard-quiz">
                    <h2>Кибербезопасность - Тест</h2>
                    <div id="premade-questions"></div>
                    <div class="quiz-controls">
                        <button onclick="showCorrectAnswers()" id="finish-btn" class="quiz-btn">Завершить тест</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let questionCount = 0;

        // Функции для пользовательской викторины
        function addQuestion() {
            questionCount++;
            const container = document.getElementById('questions-container');

            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-box';
            questionDiv.innerHTML = `
                    <h3>Вопрос ${questionCount}</h3>
                    <input type="text"
                           placeholder="Текст вопроса"
                           class="input-field">
                    <div class="answers-container"></div>
                    <div class="quiz-controls">
                        <button onclick="addAnswer(this)" class="quiz-btn">Добавить ответ</button>
                        <button onclick="this.parentElement.parentElement.remove()"
                                class="quiz-btn btn-danger">Удалить</button>
                    </div>
                `;
            container.appendChild(questionDiv);
        }

        function addAnswer(button) {
            const answersContainer = button.parentElement.previousElementSibling;
            const answerDiv = document.createElement('div');
            answerDiv.className = 'answer-row';
            answerDiv.innerHTML = `
                    <input type="text" placeholder="Вариант ответа" class="input-field">
                    <label>
                        <input type="checkbox"> Правильный
                    </label>
                    <button onclick="this.parentElement.remove()" class="btn-danger">❌</button>
                `;
            answersContainer.appendChild(answerDiv);
        }

        function clearAll() {
            if (confirm('Удалить все вопросы?')) {
                document.getElementById('questions-container').innerHTML = '';
                questionCount = 0;
            }
        }

        // Стандартная викторина
        function generateCyberQuiz() {
            const cyberQuestions = [
                {
                    question: "Что такое фишинг?",
                    answers: [
                        { text: "Вид спортивной рыбалки", correct: false },
                        { text: "Кибератака через поддельные emails", correct: true },
                        { text: "Тип шифрования данных", correct: false }
                    ]
                },
                {
                    question: "Что означает аббревиатура 2FA?",
                    answers: [
                        { text: "Двухфакторная аутентификация", correct: true },
                        { text: "2-фазная атака", correct: false },
                        { text: "2-уровневое форматирование", correct: false }
                    ]
                },
                {
                    question: "Что должен содержать надежный пароль?",
                    answers: [
                        { text: "Имя домашнего питомца", correct: false },
                        { text: "Комбинацию букв, цифр и символов", correct: true },
                        { text: "Дату рождения", correct: false }
                    ]
                },
                {
                    question: "Для чего используется VPN?",
                    answers: [
                        { text: "Ускорения интернета", correct: false },
                        { text: "Шифрования интернет-соединения", correct: true },
                        { text: "Создания виртуальных машин", correct: false }
                    ]
                },
                {
                    question: "Что проверяет penetration test?",
                    answers: [
                        { text: "Уровень чернил в принтере", correct: false },
                        { text: "Безопасность компьютерных систем", correct: true },
                        { text: "Скорость сети", correct: false }
                    ]
                },
                {
                    question: "Что такое ransomware?",
                    answers: [
                        { text: "Программа-вымогатель", correct: true },
                        { text: "Система управления базами данных", correct: false },
                        { text: "Тип антивируса", correct: false }
                    ]
                },
                {
                    question: "Как часто нужно обновлять ПО?",
                    answers: [
                        { text: "Только при поломке", correct: false },
                        { text: "По мере выхода обновлений", correct: true },
                        { text: "Раз в 5 лет", correct: false }
                    ]
                },
                {
                    question: "Что защищает брандмауэр?",
                    answers: [
                        { text: "От несанкционированного доступа", correct: true },
                        { text: "От физических повреждений", correct: false },
                        { text: "От перегрева процессора", correct: false }
                    ]
                },
                {
                    question: "Что такое социальная инженерия?",
                    answers: [
                        { text: "Строительство соцобъектов", correct: false },
                        { text: "Манипулирование людьми", correct: true },
                        { text: "Новый язык программирования", correct: false }
                    ]
                },
                {
                    question: "Для чего нужен HTTPS?",
                    answers: [
                        { text: "Для безопасного соединения", correct: true },
                        { text: "Для ускорения сайта", correct: false },
                        { text: "Для хостинга видео", correct: false }
                    ]
                }
            ];

            const container = document.getElementById('premade-questions');
            container.innerHTML = '';

            cyberQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-box cyber-question';
                questionDiv.innerHTML = `
                        <h3>Вопрос ${index + 1}: ${q.question}</h3>
                        <div class="answers-grid">
                            ${q.answers.map((a, i) => `
                                <div class="answer-option ${a.correct ? 'correct-answer' : ''}">
                                    <input type="radio"
                                           name="q${index}"
                                           id="q${index}_a${i}"
                                           ${a.correct ? 'data-correct="true"' : ''}>
                                    <label for="q${index}_a${i}">${a.text}</label>
                                    <span class="correct-tag">✓ Правильный</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                container.appendChild(questionDiv);
            });
        }

        function showCorrectAnswers() {
            if (!confirm("Завершить тест и показать ответы?")) return;

            const quizContainer = document.getElementById('premade-questions');
            const finishBtn = document.getElementById('finish-btn');

            quizContainer.classList.add('show-correct');
            finishBtn.textContent = "Ответы показаны ✓";
            finishBtn.disabled = true;

            // Подсчет результатов
            let score = 0;
            document.querySelectorAll('input[type="radio"]:checked').forEach(input => {
                if (input.dataset.correct === "true") score++;
            });
            alert(`Результат: ${score}/10 правильных ответов`);
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', generateCyberQuiz);

        // Сохранение викторины
        function saveQuiz() {
            const questions = [];
            document.querySelectorAll('.question-box').forEach(question => {
                const q = {
                    text: question.querySelector('input').value,
                    answers: []
                };

                question.querySelectorAll('.answer-row').forEach(answer => {
                    q.answers.push({
                        text: answer.querySelector('input[type="text"]').value,
                        correct: answer.querySelector('input[type="checkbox"]').checked
                    });
                });

                questions.push(q);
            });

            localStorage.setItem('customQuiz', JSON.stringify(questions));
            alert('Викторина сохранена!');
        }
    </script>
</body>
</html>